


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>metric_tracking package &mdash; Active Segmentation 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
  

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/katex-math.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" type="text/css" />
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="models package" href="models.html" />
  <link rel="prev" title="functional package" href="functional.html" /> 

  <!-- Preload the theme fonts -->

<link rel="preload" href="_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
</head>


<div class="container-fluid header-holder docs-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="/" aria-label="Active Segmentation"></a>
      <div class="main-menu">
        <ul>
          <li>
            <a href="/">Home</a>
          </li>

          <li class="active docs-active">
            <a href="./">Docs</a>
          </li>

          <li>
            <a href="https://github.com/HealthML/active-segmentation">GitHub</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>
  </div>
</div>

<body class="sphinx-template-body">

   

  

  <div class="table-of-contents-link-wrapper">
    <span>Table of Contents</span>
    <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
  </div>

  <nav data-toggle="sphinx-template-nav-shift" class="sphinx-template-left-menu" id="sphinx-template-left-menu">
    <div class="sphinx-template-side-scroll">
      <div class="sphinx-template-menu sphinx-template-menu-vertical" data-spy="affix" role="navigation"
        aria-label="main navigation">
        <div class="sphinx-template-left-menu-search">
          

          
          
          
          

          


<div role="search">
  <form id="rtd-search-form" class="sphinx-template-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        
        
        
        
        
        <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Active Segmentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="active_segmentation.html">Active Learning Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="run_experiments.html">run_experiments module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html">main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="active_learning.html">active_learning module</a></li>
<li class="toctree-l2"><a class="reference internal" href="inferencing.html">inferencing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html">datasets package</a></li>
<li class="toctree-l2"><a class="reference internal" href="functional.html">functional package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">metric_tracking package</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">models package</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_strategies.html">query_strategies package</a></li>
</ul>
</li>
</ul>

        
        
      </div>
    </div>
  </nav>

  <div class="sphinx-template-container">
    <div class="sphinx-template-page-level-bar" id="sphinx-template-page-level-bar">
      <div class="sphinx-template-breadcrumbs-wrapper">
        <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="sphinx-template-breadcrumbs">
      <li><a href="index.html" class="fa fa-large fa-home">Docs</a> &gt;</li>
          <li><a href="active_segmentation.html">Active Learning Framework</a> &gt;</li>
      <li>metric_tracking package</li>
      <li class="sphinx-template-breadcrumbs-aside">
            <a href="_sources/metric_tracking.rst.txt" rel="nofollow"><img src="_static/images/view-page-source-icon.svg"></a>
      </li>
  </ul>
</div>
      </div>

      <div class="sphinx-template-shortcuts-wrapper" id="sphinx-template-shortcuts-wrapper">
        Shortcuts
      </div>
    </div>

    <section data-toggle="sphinx-template-nav-shift" id="sphinx-template-content-wrap" class="sphinx-template-content-wrap">
      <div class="sphinx-template-content-left">
        
          <div class="rst-content">
            
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
              <article itemprop="articleBody" id="sphinx-template-article" class="sphinx-template-article">
                
  <section id="metric-tracking-package">
<h1>metric_tracking package<a class="headerlink" href="#metric-tracking-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-metric_tracking.combined_per_epoch_metric">
<span id="metric-tracking-combined-per-epoch-metric-module"></span><h2>metric_tracking.combined_per_epoch_metric module<a class="headerlink" href="#module-metric_tracking.combined_per_epoch_metric" title="Permalink to this headline">¶</a></h2>
<p>Module containing a metrics class for tracking and aggregating several metrics related to multiple 3D MRT scans
whose slices may be scattered across different batches.</p>
<dl class="py class">
<dt class="sig sig-object py" id="metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">metric_tracking.combined_per_epoch_metric.</span></span><span class="sig-name descname"><span class="pre">CombinedPerEpochMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_to_class_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_background_in_reduced_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidence_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduction_across_classes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduction_across_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_nan_in_reduction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_epoch_metric.html#CombinedPerEpochMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torchmetrics.metric.Metric</span></code></p>
<p>A metrics class that tracks the metrics of multiple 3D images whose slices may be scattered across different
batches. Different metrics can be tracked per image, e.g. dice score and Hausdorff distance, and in case of
multi-label segmentation tasks, the metrics can also be tracked for different confidence levels. If <cite>reduction</cite> is
not <cite>“none”</cite>, the per-scan metrics are  aggregated into global per-epoch metric values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metrics</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – A list of metric names to be tracked. Available options: <code class="docutils literal notranslate"><span class="pre">&quot;dice_score&quot;</span></code> |
<code class="docutils literal notranslate"><span class="pre">&quot;sensitivity&quot;``|</span> <span class="pre">``&quot;specificity&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;hausdorff95&quot;</span></code>.</p></li>
<li><p><strong>id_to_class_names</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – A mapping of class indices to descriptive class names.</p></li>
<li><p><strong>image_ids</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – List of the ids of all images for which the metrics are to be tracked.</p></li>
<li><p><strong>slices_per_image</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>List</em><em>[</em><em>int</em><em>]</em><em>]</em>) – Number of slices per 3d image. If a single integer value is
provided, it is assumed that all images of the dataset have the same number of slices.</p></li>
<li><p><strong>include_background_in_reduced_metrics</strong> (<em>bool</em><em>, </em><em>optional</em>) – if <cite>False</cite>, class channel index 0 (background class)
is excluded from the calculation of aggregated metrics. This parameter is used only if <cite>multi_label</cite> is set
to <cite>False</cite>. Defaults to <cite>True</cite>.</p></li>
<li><p><strong>multi_label</strong> (<em>bool</em><em>, </em><em>optional</em>) – Determines whether the data is multi-label or not (default = <cite>False</cite>).</p></li>
<li><p><strong>confidence_levels</strong> – A list of confidence levels for which the metrics are to be
tracked separately. This parameter is used only if <cite>multi_label</cite> is set to <cite>True</cite>. Defaults to <cite>[0.5]</cite>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <cite>multi_label</cite> is <cite>False</cite>, the <cite>prediction</cite> tensor is expected to be either the output of the final softmax
layer of a segmentation model or a label-encoded, sharp prediction. In the first case, the prediction tensor
must be of floating point type and have the shape <span class="math">\((N, C, X, Y)\)</span> or <span class="math">\((N, C, X, Y, Z)\)</span> where
<cite>N = batch size</cite> and <cite>C = number of classes</cite>. In the second case, the prediction tensor must be of integer type
and have the shape <span class="math">\((N, X, Y)\)</span> or <span class="math">\((N, X, Y, Z)\)</span>. The <cite>target</cite> tensor is expected to be
label-encoded in both cases. Thus, it needs to have the shape <span class="math">\((N, X, Y)\)</span> or <span class="math">\((N, X, Y, Z)\)</span> and be
of integer type.</p>
<p>If <cite>multi_label</cite> is <cite>True</cite>, the <cite>prediction</cite> tensor is expected to be either the output of the final sigmoid
layer of a segmentation model or a sharp prediction. In the first case, the prediction tensors needs to be of
floating point type and in the second type of integer type. the In both cases the prediction tensor needs to
have the shape <span class="math">\((N, C, X, Y)\)</span> or <span class="math">\((N, C, X, Y, Z)\)</span>. The target tensor is expected to contain sharp
predictions and to have the shape <span class="math">\((N, C, X, Y)\)</span> or <span class="math">\((N, C, X, Y, Z)\)</span>.</p>
</div>
<dl>
<dt>Shape:</dt><dd><ul>
<li><div class="line-block">
<div class="line">Prediction: <span class="math">\((N, C, X, Y, ...)\)</span> or <span class="math">\((N, X, Y, ...)\)</span>, where <cite>N = batch size</cite> and <a href="#id1"><span class="problematic" id="id2">`</span></a>C = number of</div>
<div class="line">classes` (see Notes above).</div>
</div>
</li>
<li><p>Target: <span class="math">\((N, C, X, Y, ...)\)</span>, or <span class="math">\((N, X, Y, ...)\)</span> (see Notes above).</p></li>
<li><p>Image_ids: <span class="math">\((N)\)</span>, where <cite>N = batch size</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_epoch_metric.html#CombinedPerEpochMetric.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the metrics for each scan and aggregates them if <cite>reduction</cite> is not <cite>“none”</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Mapping of metric names to metric values.
If <cite>reduction</cite> is <cite>“none”</cite>, the keys have the form
<cite>&lt;metric name&gt;_&lt;confidence_level&gt;_&lt;image ID&gt;</cite>.
Otherwise the keys have the form <cite>&lt;reduction&gt;_&lt;metric name&gt;_&lt;confidence_level&gt;</cite>
If <cite>“metrics_to_aggregate”</cite> is provided and <cite>reduction</cite> is not <cite>“none”</cite>, the dictionary additionally
contains the keys <cite>&lt;reduction&gt;_aggregated_&lt;confidence_level&gt;</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[string, Tensor]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.get_metric_names">
<span class="sig-name descname"><span class="pre">get_metric_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_epoch_metric.html#CombinedPerEpochMetric.get_metric_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.get_metric_names" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list containing the keys of the dictionary returned by the <cite>compute()</cite> method of this
module.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[string]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_epoch_metric.html#CombinedPerEpochMetric.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets internal state such that metric ready for new data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_epoch_metric.html#CombinedPerEpochMetric.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_epoch_metric.CombinedPerEpochMetric.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the prediction and target of a given batch and updates the metrics accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Tensor</em>) – A batch of predictions.</p></li>
<li><p><strong>target</strong> (<em>Tensor</em>) – A batch of targets.</p></li>
<li><p><strong>image_ids</strong> (<em>Iterable</em><em>[</em><em>string</em><em>]</em>) – Image IDs of each slice in the prediction and target batches.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-metric_tracking.combined_per_image_metric">
<span id="metric-tracking-combined-per-image-metric-module"></span><h2>metric_tracking.combined_per_image_metric module<a class="headerlink" href="#module-metric_tracking.combined_per_image_metric" title="Permalink to this headline">¶</a></h2>
<p>Module containing a metrics class for tracking several metrics related to one 3d image</p>
<dl class="py class">
<dt class="sig sig-object py" id="metric_tracking.combined_per_image_metric.CombinedPerImageMetric">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">metric_tracking.combined_per_image_metric.</span></span><span class="sig-name descname"><span class="pre">CombinedPerImageMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_to_class_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidence_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_image_metric.html#CombinedPerImageMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_image_metric.CombinedPerImageMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torchmetrics.metric.Metric</span></code></p>
<p>A metrics class that tracks several metrics related to one 3d image whose slices may be scattered across
different batches. In case of multi-label segmentation tasks, the metrics can be tracked for different confidence
levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metrics</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – A list of metric names to be tracked. Available options: <code class="docutils literal notranslate"><span class="pre">&quot;dice_score&quot;</span></code> |
<code class="docutils literal notranslate"><span class="pre">&quot;sensitivity&quot;``|</span> <span class="pre">``&quot;specificity&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;hausdorff95&quot;</span></code>.</p></li>
<li><p><strong>id_to_class_names</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – A mapping of class indices to descriptive class names.</p></li>
<li><p><strong>confidence_levels</strong> (<em>Iterable</em><em>[</em><em>float</em><em>]</em><em>, </em><em>optional</em>) – A list of confidence levels for which the metrics are to be
tracked separately. This parameter is used only if <cite>multi_label</cite> is set to <cite>True</cite>. Defaults to <cite>[0.5]</cite>.</p></li>
<li><p><strong>multi_label</strong> (<em>bool</em><em>, </em><em>optional</em>) – Determines whether the task is a multi-label segmentation task or not
(default = <cite>False</cite>).</p></li>
<li><p><strong>slices_per_image</strong> (<em>int</em>) – Number of slices per 3d image.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <cite>multi_label</cite> is <cite>False</cite>, the <cite>prediction</cite> tensor is expected to be either the output of the final softmax
layer of a segmentation model or a label-encoded, sharp prediction. In the first case, the prediction tensor
must be of floating point type and have the shape <span class="math">\((C, X, Y)\)</span> or <span class="math">\((C, X, Y, Z)\)</span> where
<cite>C = number of classes</cite>. In the second case, the prediction tensor must be of integer type and have the shape
<span class="math">\((X, Y)\)</span> or <span class="math">\((X, Y, Z)\)</span>. The <cite>target</cite> tensor is expected to be label-encoded in both cases. Thus,
it needs to have the shape <span class="math">\((X, Y)\)</span> or <span class="math">\((X, Y, Z)\)</span> and be of integer type.</p>
<p>If <cite>multi_label</cite> is <cite>True</cite>, the <cite>prediction</cite> tensor is expected to be either the output of the final sigmoid
layer of a segmentation model or a sharp prediction. In the first case, the prediction tensors needs to be of
floating point type and in the second type of integer type. the In both cases the prediction tensor needs to
have the shape <span class="math">\((C, X, Y)\)</span> or <span class="math">\((C, X, Y, Z)\)</span>. The target tensor is expected to contain sharp
predictions and to have the shape <span class="math">\((C, X, Y)\)</span> or <span class="math">\((C, X, Y, Z)\)</span>.</p>
</div>
<dl class="simple">
<dt>Shape:</dt><dd><ul class="simple">
<li><p>Prediction: <span class="math">\((C, X, Y, ...)\)</span>, where <cite>C = number of classes</cite> (see Notes above).</p></li>
<li><p>Target: <span class="math">\((X, Y, ...)\)</span>, or <span class="math">\((C, X, Y, ...)\)</span> (see Notes above).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_image_metric.CombinedPerImageMetric.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_image_metric.html#CombinedPerImageMetric.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_image_metric.CombinedPerImageMetric.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the metrics for the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Mapping of metric names to metric values.
The keys have the form <cite>&lt;metric name&gt;_&lt;class_name&gt;_&lt;confidence_level&gt;</cite> for multi-label segmentation
tasks and <cite>&lt;metric name&gt;_&lt;class_name&gt;</cite> for single-label segmentation tasks.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[string, Tensor]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_image_metric.CombinedPerImageMetric.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_image_metric.html#CombinedPerImageMetric.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_image_metric.CombinedPerImageMetric.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets internal state such that metric ready for new data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metric_tracking.combined_per_image_metric.CombinedPerImageMetric.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metric_tracking/combined_per_image_metric.html#CombinedPerImageMetric.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metric_tracking.combined_per_image_metric.CombinedPerImageMetric.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a prediction and a target slice of the 3d image and updates the metrics accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Tensor</em>) – A prediction slice or a whole 3d image.</p></li>
<li><p><strong>target</strong> (<em>Tensor</em>) – A target slice or a whole 3d image.</p></li>
<li><p><strong>slice_ids</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>List</em><em>[</em><em>int</em><em>]</em><em>]</em>) – Indices of the image slices represented by <cite>prediction</cite> and <cite>target</cite>.
Must be provided if <cite>target</cite> is a single slice or a subset of slices taken from a 3d image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-metric_tracking">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-metric_tracking" title="Permalink to this headline">¶</a></h2>
</section>
</section>


              </article>
              
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="models package" accesskey="n" rel="next">Next <img src="_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="functional.html" class="btn btn-neutral" title="functional package" accesskey="p" rel="prev"><img src="_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  
  
  <hr>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Chair of Digital Health - Machine Learning @ Hasso-Plattner Institute.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using <a href="https://github.com/ain-soph/trojanzoo_sphinx_theme">trojanzoo_sphinx_theme</a> (modified from  <a href="https://github.com/ain-soph/pytorch_sphinx_theme">pytorch_sphinx_theme</a>).
      </div>
     

</footer>

          </div>
        </div>

        <div class="sphinx-template-content-right" id="sphinx-template-content-right">
          <div class="sphinx-template-right-menu" id="sphinx-template-right-menu">
            <div class="sphinx-template-side-scroll" id="sphinx-template-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">metric_tracking package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-metric_tracking.combined_per_epoch_metric">metric_tracking.combined_per_epoch_metric module</a></li>
<li><a class="reference internal" href="#module-metric_tracking.combined_per_image_metric">metric_tracking.combined_per_image_metric module</a></li>
<li><a class="reference internal" href="#module-metric_tracking">Module contents</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
    </section>
  </div>

  

  

  
  <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
  <script src="_static/jquery.js"></script>
  <script src="_static/underscore.js"></script>
  <script src="_static/doctools.js"></script>
  <script src="_static/clipboard.min.js"></script>
  <script src="_static/copybutton.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"></script>
  <script src="_static/katex_autorenderer.js"></script>
  

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  <script type="text/javascript">
    jQuery(function () {
      $('.header-logo').css('background-image', 'url()');
      $('.docs-header .header-logo').css('background-image', 'url()');
      $('.footer-logo').css('background-image', 'url()');
      });
  </script>
  <script script type="text/javascript">
    var collapsedSections = [];
  </script>
  

  <!-- Begin Footer -->

  <div class="container-fluid docs-resources" id="docs-resources">
    <div class="container">
      <div class="row">
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for Active Segmentation</p>
          <a class="with-right-arrow" href="index.html">View Docs</a>
        </div>
      </div>
    </div>
  </div>


  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="/" class="footer-logo"></a>
      </div>
    </div>
  </footer>

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="/" aria-label="Active Segmentation"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>

          <li>
            <a href="/">Home</a>
          </li>

          <li class="active resources-mobile-menu-title">
            <a href="./">Docs</a>
          </li>
          <li>
            <a href="https://github.com/HealthML/active-segmentation">GitHub</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="_static/js/vendor/anchor.min.js"></script>


  <script type="text/javascript">
    $(document).ready(function () {
      mobileMenu.bind();
      mobileTOC.bind();
      trojanzooAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.sphinx-template-article a span.pre").each(function (e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>

</html>